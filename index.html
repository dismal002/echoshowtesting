<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Write Binary File</title>
</head>
<body>
  <button id="saveBinary">Save Binary File</button>

  <script>
    async function writeBinaryFile() {
      try {
        // Prompt user to select a directory
        const dirHandle = await window.showDirectoryPicker();

        // Create or overwrite binary file
        const fileHandle = await dirHandle.getFileHandle('output.bin', { create: true });
        const writable = await fileHandle.createWritable();

        // Example binary data (e.g., first 5 bytes of a PNG file header)
        const binaryData = new Uint8Array([
          0x89, 0x50, 0x4E, 0x47, 0x0D, // PNG signature start
          0x0A, 0x1A, 0x0A               // PNG signature end
        ]);

        // Write the binary data
        await writable.write(binaryData);

        // Finalize write
        await writable.close();

        alert('Binary file saved!');
      } catch (err) {
        console.error('Failed to write binary file:', err);
      }
    }

    document.getElementById('saveBinary').addEventListener('click', writeBinaryFile);
  </script>
</body>
</html>
